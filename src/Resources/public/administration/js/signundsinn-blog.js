!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=(window.__sw__.assetPath + '/bundles/signundsinnblog/'),o(o.s="aVuU")}({KZjG:function(t){t.exports=JSON.parse('{"sig-blog":{"general":{"mainMenuItemGeneral":"Blog by Signundsinn","descriptionTextModule":"Custom blog module by Signundsinn"},"posts":{"button":{"create":"Create New Post","save":"Save","cancel":"Cancel","delete":"Delete"}}}}')},aVuU:function(t,e,o){"use strict";o.r(e);var n=Shopware.Data.Criteria;Shopware.Component.register("sig-blog-posts",{template:'{% block sig_blog_posts_page %}\n    <sw-page class="sig-blog-posts">\n        <template slot="smart-bar-actions">\n            {% block sig_blog_posts_smart_bar_actions_add %}\n                <sw-button :routerLink="{ name: \'sig.blog.create\' }" variant="primary">\n                    {{ $tc(\'sig-blog.posts.button.create\') }}\n                </sw-button>\n            {% endblock %}\n        </template>\n        <template slot="content">\n            <sw-entity-listing\n                v-if="blog"\n                :items="blog"\n                :repository="blogRepository"\n                :columns="columns"\n                detailRoute="sig.blog.detail"\n                >\n                <template #column-author="{ item }">\n                    {{ item.author.firstName }} {{ item.author.lastName }}\n                </template>\n                \n                <template #column-publishedAt="{ item }">\n                    {{ item.publishedAt|date }}\n                </template>\n\n                <template #column-createdAt="{ item }">\n                    {{ item.createdAt|date  }}\n                </template>\n\n                <template #column-updatedAt="{ item }">\n                    {{ item.updatedAt|date  }}\n                </template>\n            </sw-entity-listing>\n        </template>\n    </sw-page>\n{% endblock %}',inject:["repositoryFactory"],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{blog:void 0}},created:function(){this.getBlogPosts()},computed:{blogRepository:function(){return this.repositoryFactory.create("sig_blog_posts")},blogCriteria:function(){return(new n).addAssociation("author")},columns:function(){return[{property:"title",dataIndex:"title",label:"Title",routerLink:"sig.blog.detail",primary:!0},{property:"author",dataIndex:"author",label:"Author"},{property:"status",dataIndex:"status",label:"Published",inlineEdit:"boolean"},{property:"publishedAt",dataIndex:"publishedAt",label:"Publish Date"},{property:"createdAt",dataIndex:"createdAt",label:"Created Date"},{property:"updatedAt",dataIndex:"updatedAt",label:"Last Update Date"}]}},methods:{getBlogPosts:function(){var t=this;return this.blogRepository.search(this.blogCriteria,Shopware.Context.api).then((function(e){t.blog=e}))}}});function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s=Shopware.Component.getComponentHelper().mapPropertyErrors;Shopware.Component.register("sig-blog-create",{template:'{% block sig_blog_create_page %}\n    <sw-page class="sig-blog-create">\n        <template slot="smart-bar-actions">\n            {% block sig_blog_posts_smart_bar_actions_cancel %}\n                <sw-button @click="cancelPost" :variant="btnType.status">\n                    {{ btnType.text }}\n                </sw-button>\n            {% endblock %}\n\n            {% block sig_blog_posts_smart_bar_actions_add %}\n                <sw-button @click="savePost()" variant="primary">\n                    {{ $tc(\'sig-blog.posts.button.save\') }}\n                </sw-button>\n            {% endblock %}\n        </template>\n        <template #content>\n            <sw-card-view>\n                <sw-container columns="3fr 1fr" gap="20px">\n                    <sw-card positionIdentifier="content">\n\n                        <sw-text-field v-model="blog.title" :required="true" :error="blogTitleError">\n                            <template v-slot:label>Title</template>\n                        </sw-text-field>\n\n                        <sw-text-editor\n                            v-model="blog.content"\n                            :is-inline-edit="false"\n                            :required="true"\n                            :error="blogContentError"\n                        >\n                            <template v-slot:label>Content</template>\n                        </sw-text-editor>\n\n                    </sw-card>\n                    <sw-card positionIdentifier="sidebar">\n                        <sw-switch-field v-model="blog.status" :label="blog.status ? \'Published\' : \'Draft\'"></sw-switch-field>\n                        {# Datepicker #}\n                        <sw-datepicker label="Published Date" v-model="blog.publishedAt" />\n                        \n                        <sw-single-select\n                            v-model="blog.authorId"\n                            label="Author"\n                            :options="[{value: currentUser.id, label: currentUser.firstName}]"\n                            :error="blogAuthorIdError"\n                        >\n                        </sw-single-select>\n                        \n                    </sw-card>\n                </sw-container>\n             </sw-card-view>    \n        </template>\n    </sw-page>\n{% endblock %}',inject:["repositoryFactory"],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{blog:{},blogCard:"",blogSidebar:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({blogRepository:function(){return this.repositoryFactory.create("sig_blog_posts")},currentUser:function(){return Shopware.State.get("session").currentUser},editMode:function(){return"sig.blog.detail"===this.$route.name},btnType:function(){var t={delete:{text:this.$tc("sig-blog.posts.button.delete"),status:"danger"},cancel:{text:this.$tc("sig-blog.posts.button.cancel"),status:"default"}};return this.editMode?t.delete:t.cancel}},s("blog",["title","content","authorId"])),created:function(){this.blog=this.blogRepository.create(Shopware.Context.api)},methods:{savePost:function(){var t=this,e=new Date(Date.now()).toISOString(),o=this.blog;o.authorId=this.currentUser.id,o.publishedAt=!0!==o.status||o.publishedAt?o.publishedAt:e,this.blogRepository.save(o,Shopware.Context.api).then((function(){o.id&&t.$router.push({name:"sig.blog.detail",params:{id:o.id}})}))},cancelPost:function(){this.editMode&&this.blogRepository.delete(this.blog.id,Shopware.Context.api),this.$router.push({name:"sig.blog.posts"})}}});o("uZhX");var l=o("KZjG");Shopware.Module.register("sig-blog",{type:"plugin",name:"Blog",title:"sig-blog.general.mainMenuItemGeneral",description:"sig-blog.general.descriptionTextModule",color:"#ff3d58",icon:"default-shopping-paper-bag-product",snippets:{"en-GB":l},routes:{posts:{component:"sig-blog-posts",path:"posts"},create:{component:"sig-blog-create",path:"create"},detail:{component:"sig-blog-detail",path:"detail/:id"}},navigation:[{label:"sig-blog.general.mainMenuItemGeneral",color:"#ff3d58",path:"sig.blog.posts",icon:"default-shopping-paper-bag-product",parent:"sw-catalogue",position:100}]})},uZhX:function(t,e){var o=Shopware.Data.Criteria;Shopware.Component.extend("sig-blog-detail","sig-blog-create",{metaInfo:function(){return{title:"edit"}},data:function(){return{blogId:null,blog:{},blogCard:"",blogSidebar:""}},computed:{blogRepository:function(){return this.repositoryFactory.create("sig_blog_posts")},blogCriteria:function(){return(new o).addAssociation("author")}},created:function(){var t=this;this.repository=this.repositoryFactory.create("sig_blog_posts"),this.blogId=this.$route.params.id,this.repository.get(this.blogId,Shopware.Context.api,this.blogCriteria).then((function(e){t.blog=e}))},methods:{savePost:function(){var t=this;this.blogRepository.save(this.blog,Shopware.Context.api).then((function(){t.blogRepository.get(t.blogId,Shopware.Context.api,t.blogCriteria).then((function(e){t.blog=e}))}))}}})}});